<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Share</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Login/Register Form -->
    <div id="authContainer" class="auth-container">
        <h1>Social Share</h1>
        
        <div class="tabs">
            <div class="tab active" onclick="switchAuthTab('login')">Anmelden</div>
            <div class="tab" onclick="switchAuthTab('register')">Registrieren</div>
        </div>

        <!-- Login Form -->
        <div id="loginForm" class="tab-content active">
            <form onsubmit="login(event)">
                <div class="form-group">
                    <label>Benutzername:</label>
                    <input type="text" id="loginUsername" required>
                </div>
                <div class="form-group">
                    <label>Passwort:</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit">Anmelden</button>
            </form>
        </div>

        <!-- Register Form -->
        <div id="registerForm" class="tab-content">
            <form onsubmit="register(event)">
                <div class="form-group">
                    <label>Benutzername:</label>
                    <input type="text" id="regUsername" required>
                </div>
                <div class="form-group">
                    <label>E-Mail:</label>
                    <input type="email" id="regEmail" required>
                </div>
                <div class="form-group">
                    <label>Passwort:</label>
                    <input type="password" id="regPassword" required>
                </div>
                <div class="form-group">
                    <label>Passwort bestätigen:</label>
                    <input type="password" id="regPasswordConfirm" required>
                </div>
                <button type="submit">Registrieren</button>
            </form>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="container hidden">
        <div class="nav-bar">
            <div class="user-info">
                <div class="avatar" id="userAvatar">U</div>
                <span id="welcomeMessage">Willkommen!</span>
            </div>
            <div class="nav-buttons">
                <button onclick="showTab('dashboard')">Dashboard</button>
                <button onclick="showTab('friends')">Freunde</button>
                <button onclick="showTab('myshares')">Meine Inhalte</button>
                <button onclick="showTab('received')">Erhaltene Inhalte</button>
                <button onclick="showTab('account')">Account</button>
                <button class="btn-secondary" onclick="logout()">Abmelden</button>
            </div>
        </div>

        <div class="main-app">
            <!-- Dashboard Tab -->
            <div id="dashboardTab" class="tab-content active">
                <h2>Dashboard</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div class="friend-item">
                        <div>
                            <h3>Freunde</h3>
                            <p id="friendCount">0 Freunde</p>
                        </div>
                    </div>
                    <div class="friend-item">
                        <div>
                            <h3>Geteilte Inhalte</h3>
                            <p id="shareCount">0 Inhalte geteilt</p>
                        </div>
                    </div>
                    <div class="friend-item">
                        <div>
                            <h3>Freundschaftsanfragen</h3>
                            <p id="requestCount">0 offene Anfragen</p>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h3>Schnellaktionen</h3>
                    <div style="display: flex; gap: 15px; margin-top: 15px; flex-wrap: wrap;">
                        <button class="btn-success" onclick="showShareModal()">Inhalt teilen</button>
                        <button onclick="showTab('friends')">Freunde verwalten</button>
                        <button onclick="showAddFriendModal()">Freund hinzufügen</button>
                        <button onclick="showTab('myshares')">Meine Inhalte</button>
                        <button onclick="showTab('received')">Erhaltene Inhalte</button>
                    </div>
                </div>
            </div>

            <!-- Friends Tab -->
            <div id="friendsTab" class="tab-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2>Freunde verwalten</h2>
                    <button class="btn-success" onclick="showAddFriendModal()">Freund hinzufügen</button>
                </div>

                <div class="tabs">
                    <div class="tab active" onclick="switchFriendTab('current')">Aktuelle Freunde</div>
                    <div class="tab" onclick="switchFriendTab('requests')">Anfragen</div>
                </div>

                <div id="currentFriends" class="tab-content active">
                    <div class="friend-list" id="friendsList">
                        <!-- Friends will be loaded here -->
                    </div>
                </div>

                <div id="friendRequests" class="tab-content">
                    <div class="request-list" id="requestsList">
                        <!-- Friend requests will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- My Shares Tab -->
            <div id="mysharesTab" class="tab-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2>Meine geteilten Inhalte</h2>
                    <button class="btn-success" onclick="showShareModal()">Neuen Inhalt teilen</button>
                </div>
                <div class="share-list" id="mySharesList">
                    <!-- My shared content will be loaded here -->
                </div>
            </div>

            <!-- Received Shares Tab mit Ordnerstruktur -->
            <div id="receivedTab" class="tab-content">
                <h2>Erhaltene Inhalte</h2>
                <div class="received-content-container">
                    <!-- Ordner-Sidebar -->
                    <div class="folder-sidebar">
                        <h3>Ordner</h3>
                        <ul class="folder-list" id="folderList">
                            <!-- Ordner werden hier dynamisch geladen -->
                        </ul>
                        
                        <div class="add-folder-form">
                            <h4 style="margin-bottom: 10px; font-size: 14px; color: #4a5568;">Neuen Ordner erstellen</h4>
                            <form onsubmit="createFolder(event)">
                                <input type="text" class="folder-input" id="newFolderName" placeholder="Ordnername" required>
                                <button type="submit" class="btn-success btn-small" style="margin-left: 8px;">+</button>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Hauptinhalt -->
                    <div class="received-main-content">
                        <div class="content-header">
                            <h3 class="content-title" id="currentFolderTitle">Alle erhaltenen Inhalte</h3>
                            <div>
                                <span id="contentCount" style="color: #718096; font-size: 14px;">0 Inhalte</span>
                            </div>
                        </div>
                        <div class="share-list" id="receivedSharesList">
                            <!-- Received shared content will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Account Tab -->
            <div id="accountTab" class="tab-content">
                <h2>Account verwalten</h2>
                <form onsubmit="updateAccount(event)">
                    <div class="form-group">
                        <label>Benutzername:</label>
                        <input type="text" id="accountUsername" required>
                    </div>
                    <div class="form-group">
                        <label>E-Mail:</label>
                        <input type="email" id="accountEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Neues Passwort (leer lassen wenn unverändert):</label>
                        <input type="password" id="accountPassword">
                    </div>
                    <button type="submit" class="btn-success">Änderungen speichern</button>
                </form>
                
                <div style="margin-top: 30px; padding-top: 30px; border-top: 2px solid #e2e8f0;">
                    <h3 style="color: #f56565;">Gefahrenzone</h3>
                    <button class="btn-danger" onclick="deleteAccount()" style="margin-top: 15px;">Account löschen</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Friend Modal -->
    <div id="addFriendModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addFriendModal')">&times;</span>
            <h2>Freund hinzufügen</h2>
            <form onsubmit="sendFriendRequest(event)">
                <div class="form-group">
                    <label>Benutzername:</label>
                    <input type="text" id="friendUsername" required>
                </div>
                <button type="submit" class="btn-success">Freundschaftsanfrage senden</button>
            </form>
        </div>
    </div>

    <!-- Share Content Modal -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('shareModal')">&times;</span>
            <h2>Inhalt teilen</h2>
            <form onsubmit="shareContent(event)">
                <div class="form-group">
                    <label>Art des Inhalts:</label>
                    <div class="share-type-icons">
                        <div class="share-type-btn active" onclick="selectShareType('link')">🔗 Link</div>
                        <div class="share-type-btn" onclick="selectShareType('image')">🖼️ Bild</div>
                        <div class="share-type-btn" onclick="selectShareType('document')">📄 Dokument</div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Titel:</label>
                    <input type="text" id="shareTitle" required>
                </div>

                <div class="form-group" id="linkGroup">
                    <label>Link URL:</label>
                    <input type="url" id="shareLink">
                </div>

                <div class="form-group hidden" id="fileGroup">
                    <label>Datei:</label>
                    <input type="file" id="shareFile">
                </div>

                <div class="form-group">
                    <label>Beschreibung:</label>
                    <textarea id="shareDescription" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label>Mit folgenden Freunden teilen:</label>
                    <div class="checkbox-group" id="friendsCheckboxes">
                        <!-- Friend checkboxes will be loaded here -->
                    </div>
                </div>

                <button type="submit" class="btn-success">Inhalt teilen</button>
            </form>
        </div>
    </div>

    <!-- Ordner auswählen Modal -->
    <div id="folderSelectModal" class="modal">
        <div class="modal-content folder-select-modal">
            <span class="close" onclick="closeModal('folderSelectModal')">&times;</span>
            <h2>Zu Ordner hinzufügen</h2>
            <div class="form-group">
                <label>Wählen Sie einen oder mehrere Ordner:</label>
                <div class="checkbox-group" id="folderCheckboxes">
                    <!-- Folder checkboxes will be loaded here -->
                </div>
            </div>
            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button class="btn-secondary" onclick="closeModal('folderSelectModal')">Abbrechen</button>
                <button class="btn-success" onclick="addToSelectedFolders()">Hinzufügen</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
